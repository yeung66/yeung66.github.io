<!doctype html><html lang=en-US><head prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#"><meta charset=UTF-8><meta name=generator content="Hugo 0.122.0"><meta name=theme-color content="#fff"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=format-detection content="telephone=no, date=no, address=no, email=no"><meta http-equiv=Cache-Control content="no-transform"><meta http-equiv=Cache-Control content="no-siteapp"><title>Clipboard Access in JVM | YeungYeah's Blog</title>
<link rel=stylesheet href=/en/css/meme.min.9847a69a6c7c3b7d9f2f94ce57effe259aaafa9d41d2def0edd8dbf19fc53f0d.css><script src=/en/js/meme.min.28dc5a52f3177d6bb4b4ed1716ee0ae85e552c8c44ce94573129039a2db5ffb0.js></script><link rel=stylesheet href=/fonts/google-fonts.css media=print onload='this.media="all"'><noscript><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400;0,500;0,700;1,400;1,700&amp;family=Noto+Serif+SC:wght@400;500;700&amp;family=Source+Code+Pro:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap"></noscript><meta name=author content="YeungYeah"><meta name=description content="The idea originated from my desire to write a Kotlin script that reads the content of the clipboard and saves it to a file. However, after searching online, the methods given by Java and Kotlin both access the system clipboard through the awt package in the JDK. Since Kotlin scripts still run on the JVM target, the methods are universal.
"><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><link rel=mask-icon href=/icons/safari-pinned-tab.svg color=#2a6df4><link rel=apple-touch-icon sizes=180x180 href=/icons/apple-touch-icon.png><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-title content="YeungYeah's Blog"><meta name=apple-mobile-web-app-status-bar-style content="black"><meta name=mobile-web-app-capable content="yes"><meta name=application-name content="YeungYeah's Blog"><meta name=msapplication-starturl content="../../../"><meta name=msapplication-TileColor content="#fff"><meta name=msapplication-TileImage content="../../../icons/mstile-150x150.png"><link rel=manifest href=/manifest.json><link rel=canonical href=https://scottyeung.top/en/2023/clipboard-access-jvm/><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","datePublished":"2023-09-10T20:00:00+08:00","dateModified":"2025-12-18T15:27:32+00:00","url":"https://scottyeung.top/en/2023/clipboard-access-jvm/","headline":"Clipboard Access in JVM","description":"The idea originated from my desire to write a Kotlin script that reads the content of the clipboard and saves it to a file. However, after searching online, the methods given by Java and Kotlin both access the system clipboard through the awt package in the JDK. Since Kotlin scripts still run on the JVM target, the methods are universal.\n","inLanguage":"en-US","articleSection":"posts","wordCount":690,"image":"https://scottyeung.top/images/favicon-32x32.png","author":{"@type":"Person","description":"ç”Ÿæ´»å°½ç®¡ä¸å¼€å¿ƒğŸŒˆæˆ‘ä»¬æ²¡æœ‰ä¸å¯èƒ½","email":"yeungyeah@qq.com","image":"https://scottyeung.top/images/self.jpg","url":"https://scottyeung.top/","name":"YeungYeah"},"publisher":{"@type":"Organization","name":"YeungYeah's Blog","logo":{"@type":"ImageObject","url":"https://scottyeung.top/images/favicon-32x32.png"},"url":"https://scottyeung.top/en/"},"mainEntityOfPage":{"@type":"WebSite","@id":"https://scottyeung.top/en/"}}</script><meta name=twitter:card content="summary"><meta name=twitter:site content="@@ScottYeung"><meta property="og:title" content="Clipboard Access in JVM"><meta property="og:description" content="The idea originated from my desire to write a Kotlin script that reads the content of the clipboard and saves it to a file. However, after searching online, the methods given by Java and Kotlin both access the system clipboard through the awt package in the JDK. Since Kotlin scripts still run on the JVM target, the methods are universal.
"><meta property="og:url" content="https://scottyeung.top/en/2023/clipboard-access-jvm/"><meta property="og:site_name" content="YeungYeah's Blog"><meta property="og:locale" content="en"><meta property="og:locale:alternate" content="zh"><meta property="og:image" content="https://scottyeung.top/images/favicon-32x32.png"><meta property="og:type" content="article"><meta property="article:published_time" content="2023-09-10T20:00:00+08:00"><meta property="article:modified_time" content="2025-12-18T15:27:32+00:00"><meta property="article:section" content="posts"><script async src=https://umami.yeungyeah.top/script.js data-website-id=5a32267e-454f-497a-b0d8-f1ebbf0c585e></script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7766364950991401" crossorigin=anonymous></script></head><body><div class=container><header class=header><div class=header-wrapper><div class="header-inner single"><div class=site-brand><a href=/en/ class=brand>YeungYeah's Blog</a></div><nav class=nav><ul class=menu id=menu><li class=menu-item><a href=/en/about/><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" class="icon user-circle"><path d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6.0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7.0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4.0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9s28-2.7 40.9-6.9c2.3-.7 4.7-1.1 7.1-1.1 42.9.0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"/></svg><span class=menu-item-name>About</span></a></li><li class=menu-item><a href=/en/posts/><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon archive"><path d="M32 448c0 17.7 14.3 32 32 32h384c17.7.0 32-14.3 32-32V160H32v288zm160-212c0-6.6 5.4-12 12-12h104c6.6.0 12 5.4 12 12v8c0 6.6-5.4 12-12 12H204c-6.6.0-12-5.4-12-12v-8zM480 32H32C14.3 32 0 46.3.0 64v48c0 8.8 7.2 16 16 16h480c8.8.0 16-7.2 16-16V64c0-17.7-14.3-32-32-32z"/></svg><span class=menu-item-name>Posts</span></a></li><li class=menu-item><a href=/en/tags/><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" class="icon tags"><path d="M497.941 225.941 286.059 14.059A48 48 0 00252.118.0H48C21.49.0.0 21.49.0 48v204.118a48 48 0 0014.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882.0l204.118-204.118c18.745-18.745 18.745-49.137.0-67.882zM112 160c-26.51.0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882.0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397.0h48.721a48 48 0 0133.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137.0 67.882z"/></svg><span class=menu-item-name>Tags</span></a></li><li class=menu-item><a href=https://www.travellings.cn/go.html><svg class="icon subway" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1216 0q185 0 316.5 93.5T1664 320v896q0 130-125.5 222t-305.5 97l213 202q16 15 8 35t-30 20H368q-22 0-30-20t8-35l213-202q-180-5-305.5-97T128 1216V320q0-133 131.5-226.5T576 0h640zM416 1312q66 0 113-47t47-113-47-113-113-47-113 47-47 113 47 113 113 47zm416-544V256H288v512h544zm544 544q66 0 113-47t47-113-47-113-113-47-113 47-47 113 47 113 113 47zm160-544V256H960v512h576z"/></svg><span class=menu-item-name>Travel</span></a></li><li class=menu-item><a href=/><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" class="icon user-circle"><path d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6.0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7.0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4.0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9s28-2.7 40.9-6.9c2.3-.7 4.7-1.1 7.1-1.1 42.9.0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"/></svg><span class=menu-item-name>ä¸­æ–‡</span></a></li><li class=menu-item><a id=theme-switcher href=#><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon theme-icon-light"><path d="M193.2 104.5 242 7a18 18 0 0128 0l48.8 97.5L422.2 70A18 18 0 01442 89.8l-34.5 103.4L505 242a18 18 0 010 28l-97.5 48.8L442 422.2A18 18 0 01422.2 442l-103.4-34.5L270 505a18 18 0 01-28 0l-48.8-97.5L89.8 442A18 18 0 0170 422.2l34.5-103.4-97.5-48.8a18 18 0 010-28l97.5-48.8L70 89.8A18 18 0 0189.8 70zM256 128a128 128 0 10.01.0M256 160a96 96 0 10.01.0"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon theme-icon-dark"><path d="M27 412A256 256 0 10181 5a11.5 11.5.0 00-5 20A201.5 201.5.0 0142 399a11.5 11.5.0 00-15 13"/></svg></a></li></ul></nav></div></div><input type=checkbox id=nav-toggle aria-hidden=true>
<label for=nav-toggle class=nav-toggle></label>
<label for=nav-toggle class=nav-curtain></label></header><div id=anti-mirror-display style=display:none>The content of this website is only deployed under the domain
ğ™¨ğ™˜ğ™¤ğ™©ğ™©ğ™®ğ™šğ™ªğ™£ğ™œ.ğ™©ğ™¤ğ™¥(scottyeung[dot]top). Any other domain sites are unauthorized
illegal mirrors.
<script>(function(){var t,n,s,o,i,a="c2NvdHR5ZXVuZy50b3A=",r="bG9jYWxob3N0",c="aHR0cHM6Ly9zY290dHlldW5nLnRvcA==";function e(e){return atob(e)}t=e(a),s=e(r),o=e(c),n=document.location.hostname,n!==t&&n!==s&&(i=new URL(window.location.href),i.hostname=t,document.body.innerHTML=['<div style="margin: auto;">',"<h1>å½“å‰é¡µé¢å¹¶éæœ¬æ–‡ä½œè€…çš„ä¸»é¡µï¼Œå°†åœ¨ 3 ç§’åè·³è½¬åˆ°çœŸæ­£ä¸»é¡µ ğ™¨ğ™˜ğ™¤ğ™©ğ™©ğ™®ğ™šğ™ªğ™£ğ™œ.ğ™©ğ™¤ğ™¥(scottyeung[dot]top)ã€‚</h1>","</div>"].join(""),document.body.style=["background-color: white;","color: black;","text-align: center;","font-size: 24px;","width: 100vw;","height: 100vh;","display: flex;"].join(""),setTimeout(()=>{window.location.href=o},3e3))})()</script></div><main class="main single" id=main><div class=main-inner><article class="content post h-entry" data-align=justify data-type=posts><h1 class="post-title p-name">Clipboard Access in JVM</h1><div class=post-meta><time datetime=2023-09-10T20:00:00+08:00 class="post-meta-item published dt-published"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon post-meta-icon"><path d="M148 288h-40c-6.6.0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6.0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm108-12v-40c0-6.6-5.4-12-12-12h-40c-6.6.0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6.0 12-5.4 12-12zm96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6.0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6.0 12-5.4 12-12zm-96 96v-40c0-6.6-5.4-12-12-12h-40c-6.6.0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6.0 12-5.4 12-12zm-96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6.0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6.0 12-5.4 12-12zm192 0v-40c0-6.6-5.4-12-12-12h-40c-6.6.0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6.0 12-5.4 12-12zm96-260v352c0 26.5-21.5 48-48 48H48c-26.5.0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h48V12c0-6.6 5.4-12 12-12h40c6.6.0 12 5.4 12 12v52h128V12c0-6.6 5.4-12 12-12h40c6.6.0 12 5.4 12 12v52h48c26.5.0 48 21.5 48 48zm-48 346V160H48v298c0 3.3 2.7 6 6 6h340c3.3.0 6-2.7 6-6z"/></svg>&nbsp;2023.9.10</time>
<time datetime=2025-12-18T15:27:32+00:00 class="post-meta-item modified dt-updated"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon post-meta-icon"><path d="M4e2 64h-48V12c0-6.627-5.373-12-12-12h-40c-6.627.0-12 5.373-12 12v52H160V12c0-6.627-5.373-12-12-12h-40c-6.627.0-12 5.373-12 12v52H48C21.49 64 0 85.49.0 112v352c0 26.51 21.49 48 48 48h352c26.51.0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm-6 4e2H54a6 6 0 01-6-6V160h352v298a6 6 0 01-6 6zm-52.849-200.65L198.842 404.519c-4.705 4.667-12.303 4.637-16.971-.068l-75.091-75.699c-4.667-4.705-4.637-12.303.068-16.971l22.719-22.536c4.705-4.667 12.303-4.637 16.97.069l44.104 44.461 111.072-110.181c4.705-4.667 12.303-4.637 16.971.068l22.536 22.718c4.667 4.705 4.636 12.303-.069 16.97z"/></svg>&nbsp;2025.12.18</time>
<span class="post-meta-item category"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon post-meta-icon"><path d="M464 128H272l-54.63-54.63c-6-6-14.14-9.37-22.63-9.37H48C21.49 64 0 85.49.0 112v288c0 26.51 21.49 48 48 48h416c26.51.0 48-21.49 48-48V176c0-26.51-21.49-48-48-48zm0 272H48V112h140.12l54.63 54.63c6 6 14.14 9.37 22.63 9.37H464v224z"/></svg>&nbsp;<a href=/en/posts/ class="category-link p-category">Posts</a></span>
<span class=post-meta-item><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" class="icon post-meta-icon"><path d="M288 144a110.94 110.94.0 00-31.24 5 55.4 55.4.0 017.24 27 56 56 0 01-56 56 55.4 55.4.0 01-27-7.24A111.71 111.71.0 10288 144zm284.52 97.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35.0 000 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35.0 000-29.19zM288 4e2c-98.65.0-189.09-55-237.93-144C98.91 167 189.34 112 288 112s189.09 55 237.93 144C477.1 345 386.66 4e2 288 4e2z"/></svg>&nbsp;<span id=/en/2023/clipboard-access-jvm/ class=waline-pageview-count></span></div><div class="post-body e-content"><p>The idea originated from my desire to write a Kotlin script that reads the content of the clipboard and saves it to a file. However, after searching online, the methods given by Java and Kotlin both access the system clipboard through the awt package in the JDK. Since Kotlin scripts still run on the JVM target, the methods are universal.</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>import</span><span class=w> </span><span class=nn>java.awt.*</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>java.awt.datatransfer.DataFlavor</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>java.awt.datatransfer.UnsupportedFlavorException</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>java.io.IOException</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>Test</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span><span class=w> </span><span class=n>args</span><span class=p>)</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>IOException</span><span class=p>,</span><span class=w> </span><span class=n>UnsupportedFlavorException</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>var</span><span class=w> </span><span class=n>clipboard</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Toolkit</span><span class=p>.</span><span class=na>getDefaultToolkit</span><span class=p>().</span><span class=na>getSystemClipboard</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>var</span><span class=w> </span><span class=n>transferable</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>clipboard</span><span class=p>.</span><span class=na>getContents</span><span class=p>(</span><span class=kc>null</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>transferable</span><span class=p>.</span><span class=na>getTransferData</span><span class=p>(</span><span class=n>DataFlavor</span><span class=p>.</span><span class=na>stringFlavor</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div></div><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=k>val</span> <span class=py>toolkit</span> <span class=p>=</span> <span class=nc>Toolkit</span><span class=p>.</span><span class=n>getDefaultToolkit</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=k>val</span> <span class=py>clipboard</span> <span class=p>=</span> <span class=n>toolkit</span><span class=p>.</span><span class=n>systemClipboard</span>
</span></span><span class=line><span class=cl><span class=k>val</span> <span class=py>result</span> <span class=p>=</span> <span class=n>clipboard</span><span class=p>.</span><span class=n>getData</span><span class=p>(</span><span class=nc>DataFlavor</span><span class=p>.</span><span class=n>stringFlavor</span><span class=p>)</span> <span class=k>as</span> <span class=n>String</span>
</span></span></code></pre></td></tr></table></div></div></div><p>This method is usable and supports a wide range of data types, not only text but also images. However, there is a drawback: the headless option must be turned off when using it. Kotlin is turned off by default, and it needs to be explicitly configured with <code>kotlin -Djava.awt.headless=false</code> to disable it.</p><blockquote><p>Headless mode is a system configuration in which the display device, keyboard, or mouse is lacking. Sounds unexpected, but actually you can perform different operations in this mode, even with graphic data.</p></blockquote><p>After disabling the headless mode, the code is usable. However, running it will pull up a JRE program. Although this pulled-up program has no interface, it will still force a window switch, which feels bad. So, I had to find another way and chose to use Node.js. Finally, I found <a href=https://github.com/sindresorhus/clipboardy target=_blank rel=noopener>clipboardy</a>, a simple and easy-to-use npm library, which met my needs first. After carefully reading its implementation code, it accesses the system clipboard by calling the command after. However, if you call the system command, the commands in different system environments are different. How to take into account portability and run in different system environments? The solution is also simple and crude: manually write an implementation for each system, and if some systems do not have this operating system clipboard command program, include a binary as a fallback in the npm package. Simple, but usable.</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>import</span> <span class=nx>process</span> <span class=nx>from</span> <span class=s1>&#39;node:process&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>isWSL</span> <span class=nx>from</span> <span class=s1>&#39;is-wsl&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>termux</span> <span class=nx>from</span> <span class=s1>&#39;./lib/termux.js&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>linux</span> <span class=nx>from</span> <span class=s1>&#39;./lib/linux.js&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>macos</span> <span class=nx>from</span> <span class=s1>&#39;./lib/macos.js&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>windows</span> <span class=nx>from</span> <span class=s1>&#39;./lib/windows.js&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>platformLib</span> <span class=o>=</span> <span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>switch</span> <span class=p>(</span><span class=nx>process</span><span class=p>.</span><span class=nx>platform</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>case</span> <span class=s1>&#39;darwin&#39;</span><span class=o>:</span>
</span></span><span class=line><span class=cl>			<span class=k>return</span> <span class=nx>macos</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		<span class=k>case</span> <span class=s1>&#39;win32&#39;</span><span class=o>:</span>
</span></span><span class=line><span class=cl>			<span class=k>return</span> <span class=nx>windows</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		<span class=k>case</span> <span class=s1>&#39;android&#39;</span><span class=o>:</span>
</span></span><span class=line><span class=cl>			<span class=k>if</span> <span class=p>(</span><span class=nx>process</span><span class=p>.</span><span class=nx>env</span><span class=p>.</span><span class=nx>PREFIX</span> <span class=o>!==</span> <span class=s1>&#39;/data/data/com.termux/files/usr&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>				<span class=k>throw</span> <span class=k>new</span> <span class=nb>Error</span><span class=p>(</span><span class=s1>&#39;You need to install Termux for this module to work on Android: https://termux.com&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>			<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>			<span class=k>return</span> <span class=nx>termux</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		<span class=k>default</span><span class=o>:</span>
</span></span><span class=line><span class=cl>			<span class=c1>// `process.platform === &#39;linux&#39;` for WSL.
</span></span></span><span class=line><span class=cl><span class=c1></span>			<span class=k>if</span> <span class=p>(</span><span class=nx>isWSL</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>				<span class=k>return</span> <span class=nx>windows</span><span class=p>;</span>
</span></span><span class=line><span class=cl>			<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>			<span class=k>return</span> <span class=nx>linux</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})();</span>
</span></span></code></pre></td></tr></table></div></div></div><p>So, naturally, I borrowed this idea and implemented a version with Kotlin. The code implementation can be seen at <a href=https://github.com/yeung66/clipboard-jvm target=_blank rel=noopener>clipboard-jvm</a>. The idea is to call different shell commands for different operating systems to access and operate the system clipboard. For executing external commands, it's also very simple to use.</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=k>import</span> <span class=nn>org.yeungyeah.clipboard.Clipboard</span>
</span></span><span class=line><span class=cl><span class=k>val</span> <span class=py>clipboard</span> <span class=p>=</span> <span class=nc>Clipboard</span><span class=p>.</span><span class=n>getClipboard</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>println</span><span class=p>(</span><span class=n>clipboard</span><span class=p>.</span><span class=k>get</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=n>clipboard</span><span class=p>.</span><span class=k>set</span><span class=p>(</span><span class=s2>&#34;Hello World&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>println</span><span class=p>(</span><span class=n>clipboard</span><span class=p>.</span><span class=k>get</span><span class=p>())</span>
</span></span></code></pre></td></tr></table></div></div></div><p>I originally wanted to publish the dependency library to the Maven Central Repository so that the script could be used directly in one line. However, Maven publishing is really troublesome. After studying for a few hours, I was still blocked by some related checks, so I could only install it locally for my own use first. <del>I will update it after uploading it to Maven Central, and also update an article on how to deploy to Maven Central.</del></p><p>After deploying to the Maven Central Repository, you can import the dependency directly through configuration. For example, in a Java project, you can use</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;dependency&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nt>&lt;groupId&gt;</span>io.github.yeung66<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nt>&lt;artifactId&gt;</span>clipboard-jvm<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nt>&lt;version&gt;</span>1.0.0<span class=nt>&lt;/version&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table></div></div></div><p>Or in a Kotlin script, directly</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=nd>@file</span><span class=p>:</span><span class=n>DependsOn</span><span class=p>(</span><span class=s2>&#34;io.github.yeung66:clipboard-jvm:1.0.0&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>import</span> <span class=nn>org.yeungyeah.clipboard.Clipboard</span>
</span></span><span class=line><span class=cl><span class=k>val</span> <span class=py>clipboard</span> <span class=p>=</span> <span class=nc>Clipboard</span><span class=p>.</span><span class=n>getClipboard</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>println</span><span class=p>(</span><span class=n>clipboard</span><span class=p>.</span><span class=k>get</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=n>clipboard</span><span class=p>.</span><span class=k>set</span><span class=p>(</span><span class=s2>&#34;Hello World&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>println</span><span class=p>(</span><span class=n>clipboard</span><span class=p>.</span><span class=k>get</span><span class=p>())</span>
</span></span></code></pre></td></tr></table></div></div></div><p>Lift offğŸ›«ï¸. However, I have only tested it on macOS. In theory, it should work on other systems too. If you're interested, you can give it a try.</p></div><ul class=post-copyright><li class="copyright-item author"><span class=copyright-item-text>Author</span>: <a href=https://scottyeung.top/ class="p-author h-card" target=_blank rel=noopener>YeungYeah</a></li><li class="copyright-item link"><span class=copyright-item-text>Link</span>: <a href=/en/2023/clipboard-access-jvm/ target=_blank rel=noopener>https://scottyeung.top/en/2023/clipboard-access-jvm/</a></li></ul></article><div class=related-posts><h2 class=related-title>See Also:<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon related-icon"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6.0-12-5.4-12-12v-92h-92c-6.6.0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6.0 12 5.4 12 12v92h92c6.6.0 12 5.4 12 12v56z"/></svg></h2><ul class=related-list><li class=related-item><a href=/en/2023/gradle-deploy-maven-central/ class=related-link>How to Publish a Gradle Project to Maven Central Repository</a></li><li class=related-item><a href=/en/2024/remove-copyright-from-apple-books/ class=related-link>Remove Copyright Information from Copied Content in Apple Books</a></li><li class=related-item><a href=/en/2023/advent-of-code-day-5/ class=related-link>Advent of Code 2023: Day5</a></li><li class=related-item><a href=/en/2023/ai-in-arc-browser/ class=related-link>Embracing AI with the Arc Browser</a></li><li class=related-item><a href=/en/2023/arc-browser/ class=related-link>A Brief Note on Using the Arc Browser</a></li></ul></div><div class=post-tags><a href=/en/tags/Java/ rel=tag class=post-tags-link><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon tag-icon"><path d="M0 252.118V48C0 21.49 21.49.0 48 0h204.118a48 48 0 0133.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137.0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882.0L14.059 286.059A48 48 0 010 252.118zM112 64c-26.51.0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"/></svg>Java</a>
<a href=/en/tags/Kotlin/ rel=tag class=post-tags-link><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon tag-icon"><path d="M0 252.118V48C0 21.49 21.49.0 48 0h204.118a48 48 0 0133.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137.0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882.0L14.059 286.059A48 48 0 010 252.118zM112 64c-26.51.0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"/></svg>Kotlin</a>
<a href=/en/tags/Coding/ rel=tag class=post-tags-link><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon tag-icon"><path d="M0 252.118V48C0 21.49 21.49.0 48 0h204.118a48 48 0 0133.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137.0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882.0L14.059 286.059A48 48 0 010 252.118zM112 64c-26.51.0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"/></svg>Coding</a>
<a href=/en/tags/Tools/ rel=tag class=post-tags-link><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon tag-icon"><path d="M0 252.118V48C0 21.49 21.49.0 48 0h204.118a48 48 0 0133.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137.0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882.0L14.059 286.059A48 48 0 010 252.118zM112 64c-26.51.0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"/></svg>Tools</a>
<a href=/en/tags/JavaScript/ rel=tag class=post-tags-link><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon tag-icon"><path d="M0 252.118V48C0 21.49 21.49.0 48 0h204.118a48 48 0 0133.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137.0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882.0L14.059 286.059A48 48 0 010 252.118zM112 64c-26.51.0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"/></svg>JavaScript</a></div><ul class=post-nav><li class=post-nav-prev><a href=/en/2023/gradle-deploy-maven-central/ rel=prev>&lt; How to Publish a Gradle Project to Maven Central Repository</a></li><li class=post-nav-next><a href=/en/2023/arc-browser/ rel=next>A Brief Note on Using the Arc Browser ></a></li></ul><div id=wcomments></div><script src=//cdn.jsdelivr.net/npm/@waline/client@v2/dist/waline.js></script><link href=//cdn.jsdelivr.net/npm/@waline/client@v2/dist/waline.css rel=stylesheet><script>const lang="en";Waline.init({el:"#wcomments",placeholder:"æ¬¢è¿æ¥ç•™è¨€~",serverURL:"https://waline.scottyeung.top",pageview:!0,comment:!0,meta:["nick","mail","link"],lang,requiredMeta:["nick","mail"],pageSize:8,dark:'html[data-theme="dark"]'});function newWaline(){new Waline({el:"#wcomments",placeholder:"æ¬¢è¿æ¥ç•™è¨€~",serverURL:"https://waline.scottyeung.top",visitor:!0,avatar:"wavatar",meta:["nick","mail","link"],lang,requiredMeta:["nick","mail"],pageSize:8,avatarCDN:""})}</script></div></main><div id=back-to-top class=back-to-top><a href=#><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon arrow-up"><path d="M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6.0-33.9L207 39c9.4-9.4 24.6-9.4 33.9.0l194.3 194.3c9.4 9.4 9.4 24.6.0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3.0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"/></svg></a></div><footer id=footer class=footer><div class=footer-inner><div class=site-info>Â©&nbsp;2018â€“2025&nbsp;<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon footer-icon"><path d="M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3.0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"/></svg>&nbsp;YeungYeah</div><div class=site-info></div><ul class=socials><li class=socials-item><a href=/en/atom.xml title=RSS><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="icon social-icon"><path d="M19.199 24C19.199 13.467 10.533 4.8.0 4.8V0c13.165.0 24 10.835 24 24h-4.801zM3.291 17.415c1.814.0 3.293 1.479 3.293 3.295.0 1.813-1.485 3.29-3.301 3.29C1.47 24 0 22.526.0 20.71s1.475-3.294 3.291-3.295zM15.909 24h-4.665c0-6.169-5.075-11.245-11.244-11.245V8.09c8.727.0 15.909 7.184 15.909 15.91z"/></svg></a></li><li class=socials-item><a href=mailto:yeungyeah@qq.com target=_blank rel="external noopener" title=Email><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon social-icon"><path d="M464 64H48C21.49 64 0 85.49.0 112v288c0 26.51 21.49 48 48 48h416c26.51.0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm0 48v40.805c-22.422 18.259-58.168 46.651-134.587 106.49-16.841 13.247-50.201 45.072-73.413 44.701-23.208.375-56.579-31.459-73.413-44.701C106.18 199.465 70.425 171.067 48 152.805V112h416zM48 4e2V214.398c22.914 18.251 55.409 43.862 104.938 82.646 21.857 17.205 60.134 55.186 103.062 54.955 42.717.231 80.509-37.199 103.053-54.947 49.528-38.783 82.032-64.401 104.947-82.653V4e2H48z"/></svg></a></li><li class=socials-item><a href=https://github.com/yeung66 target=_blank rel="external noopener" title=GitHub><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="icon social-icon"><path d="M12 .297c-6.63.0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577.0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93.0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176.0.0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22.0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22.0 1.606-.015 2.896-.015 3.286.0.315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a></li><li class=socials-item><a href=https://www.douban.com/people/121697895/ target=_blank rel="external noopener" title=è±†ç“£><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="icon social-icon"><path d="M.643.92v2.412h22.714V.92H.643zm1.974 4.926v9.42h18.764v-9.42H2.617zm2.72 2.408H18.69v4.605H5.338V8.254zm1.657 7.412-2.512.938c1.037 1.461 1.87 2.825 2.512 4.091H0v2.385h24v-2.385h-6.678c.818-1.176 1.589-2.543 2.303-4.091l-2.73-.938a29.952 29.952.0 01-2.479 5.03h-4.75c-.786-1.962-1.677-3.641-2.672-5.03z"/></svg></a></li><li class=socials-item><a href=https://twitter.com/ScottYeung target=_blank rel="external noopener" title=Twitter><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon social-icon"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645.0 138.72-105.583 298.558-298.558 298.558-59.452.0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055.0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421.0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391.0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04.0-57.828 46.782-104.934 104.934-104.934 30.213.0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg></a></li><li class=socials-item><a href=https://t.me/yeungyeah_channel target=_blank rel="external noopener" title="Telegram Channel"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" class="icon social-icon"><path d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm121.8 169.9-40.7 191.8c-3 13.6-11.1 16.9-22.4 10.5l-62-45.7-29.9 28.8c-3.3 3.3-6.1 6.1-12.5 6.1l4.4-63.1 114.9-103.8c5-4.4-1.1-6.9-7.7-2.5l-142 89.4-61.2-19.1c-13.3-4.2-13.6-13.3 2.8-19.7l239.1-92.2c11.1-4 20.8 2.7 17.2 19.5z"/></svg></a></li></ul></div></footer></div><script src=https://cdn.jsdelivr.net/npm/medium-zoom@latest/dist/medium-zoom.min.js></script><script>mediumZoom(document.querySelectorAll("div.post-body img"),{background:"hsla(var(--color-bg-h), var(--color-bg-s), var(--color-bg-l), 0.95)"})</script><script src=https://cdn.jsdelivr.net/npm/instant.page@5.1.0/instantpage.min.js type=module defer></script></body></html>